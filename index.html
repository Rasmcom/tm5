<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سجل متابعة المعلم</title>
    <!-- تضمين مكتبة Tailwind CSS من خلال CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 100%;
            overflow-x: auto;
        }
        .printable-content {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 24px;
        }
        .table-container {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            white-space: nowrap;
        }
        .table-container th, .table-container td {
            padding: 8px;
            border: 1px solid #d1d5db;
            text-align: center;
        }
        .table-container th {
            background-color: #1f2937;
            color: #ffffff;
            font-weight: bold;
            text-transform: uppercase;
        }
        .table-container tr:nth-child(even) {
            background-color: #f9fafb;
        }
        .table-container .sub-header {
            font-size: 6px; /* تم تصغير حجم الخط إلى 6 بكسل كما هو مطلوب */
            font-weight: normal;
        }
        /* تعديلات الطباعة */
        @media print {
            body {
                background-color: #ffffff;
                padding: 0;
            }
            .printable-content {
                box-shadow: none;
                border-radius: 0;
                padding: 0;
            }
            .no-print {
                display: none !important;
            }
        }
        .checkbox-cell {
            position: relative;
            padding: 0;
            height: 40px;
            width: 40px;
        }
        .checkbox-cell input[type="checkbox"] {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

    <div class="printable-content container mx-auto">
        
        <!-- عنوان السجل -->
        <div class="flex justify-between items-center mb-6 no-print">
            <h1 class="text-2xl font-bold text-gray-800">سجل متابعة المعلم</h1>
            <button onclick="window.print()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                طباعة
            </button>
        </div>

        <!-- الجدول الرئيسي -->
        <table class="table-container text-right">
            <thead>
                <tr class="bg-gray-800 text-white">
                    <th rowspan="2">م</th>
                    <th rowspan="2">اسم المعلم</th>
                    <!-- الأعمدة الرئيسية -->
                    <th colspan="4" class="bg-blue-600">التعلم التفكيري (فينيجوكا)</th>
                    <th colspan="7" class="bg-indigo-600">محايج التعلم الوظيفي</th>
                    <th colspan="5" class="bg-yellow-600">مهام التقييم النهائي</th>
                    <th colspan="2" class="bg-red-600">متابعة التحصيل الدراسي</th>
                    <th colspan="2" class="bg-purple-600">توزيع الطلاب</th>
                    <th rowspan="2">توقيع المعلم/ة بالمطاوع</th>
                </tr>
                <!-- الصف الفرعي للعناوين الصغيرة -->
                <tr class="bg-gray-700 text-white">
                    <th class="sub-header">التدريس</th>
                    <th class="sub-header">متابعة</th>
                    <th class="sub-header">سير</th>
                    <th class="sub-header">تقويم</th>
                    <th class="sub-header">تحديد</th>
                    <th class="sub-header">دعم</th>
                    <th class="sub-header">محتوى</th>
                    <th class="sub-header">مهام</th>
                    <th class="sub-header">إدارة</th>
                    <th class="sub-header">ورس</th>
                    <th class="sub-header">تخصص</th>
                    <th class="sub-header">مهام</th>
                    <th class="sub-header">إدارية</th>
                    <th class="sub-header">عمل</th>
                    <th class="sub-header">تقييم</th>
                    <th class="sub-header">أداء</th>
                    <th class="sub-header">تكامل</th>
                    <th class="sub-header">الطلاب</th>
                    <th class="sub-header">أخرى</th>
                </tr>
            </thead>
            <tbody id="teacher-data-body">
                <!-- سيتم ملء البيانات هنا بواسطة JavaScript -->
            </tbody>
        </table>
    </div>

    <script>
        // دالة لتحويل بيانات النص الخام إلى مصفوفة من الكائنات
        function parseTeacherData(data) {
            const lines = data.trim().split('\n');
            const parsedData = [];

            lines.forEach(line => {
                const parts = line.trim().split('\t');
                if (parts.length >= 2) {
                    const fullName = parts[1];
                    // استخراج الاسم الأول والأخير فقط
                    const nameParts = fullName.split(' ');
                    let firstName = nameParts[0] || '';
                    let lastName = nameParts[nameParts.length - 1] || '';
                    
                    // إذا كان الاسم الأول والأخير متطابقين، نستخدم الاسم الأول فقط
                    const shortName = (firstName === lastName) ? firstName : `${firstName} ${lastName}`;
                    
                    parsedData.push({
                        id: parts[0],
                        name: shortName
                    });
                }
            });
            return parsedData;
        }

        // بيانات المعلمين الخام (من مثال المستخدم)
        const rawData = `
            1037167663	صالح عبدالرحيم عطيه الزهراني	966555779400	دائم	معلم	صفوف أولية	عربي
            1048596781	أحمد المحمدي	966504221190	دائم	معلم	صفوف أولية	عربي
            1059434872	أحمد سعدي	966555779401	دائم	معلم	صفوف أولية	عربي
            1068894523	محمد أبو جبل	966555779402	دائم	معلم	صفوف أولية	عربي
            1077556941	أحمد العجلي	966555779403	دائم	معلم	صفوف أولية	عربي
            1088456254	أحمد أحمدي	966555779404	دائم	معلم	صفوف أولية	عربي
            1099665842	أيمن القبيلي	966555779405	دائم	معلم	صفوف أولية	عربي
            1101569974	فواز فواز الزهراني	966555779406	دائم	معلم	صفوف أولية	عربي
            1123548976	نواف الزهراني	966555779407	دائم	معلم	صفوف أولية	عربي
            1134567890	ياسر العتيبي	966555779408	دائم	معلم	صفوف أولية	عربي
            1145678901	عمار محمدي	966555779409	دائم	معلم	صفوف أولية	عربي
            1156789012	سالم سالم	966555779410	دائم	معلم	صفوف أولية	عربي
            1167890123	حمد السفياني	966555779411	دائم	معلم	صفوف أولية	عربي
            1178901234	فهد المالكي	966555779412	دائم	معلم	صفوف أولية	عربي
        `;

        // دالة لإنشاء الصفوف في الجدول
        function renderTable(teachers) {
            const tbody = document.getElementById('teacher-data-body');
            if (!tbody) return;

            // مسح المحتوى الحالي
            tbody.innerHTML = '';

            teachers.forEach((teacher, index) => {
                const row = document.createElement('tr');
                
                // العمود التسلسلي
                const numCell = document.createElement('td');
                numCell.textContent = index + 1;
                row.appendChild(numCell);
                
                // عمود اسم المعلم
                const nameCell = document.createElement('td');
                nameCell.textContent = teacher.name;
                row.appendChild(nameCell);
                
                // الأعمدة التابعة
                // عدد الأعمدة الثابتة للمتابعة (18 عمودًا)
                const numCheckboxes = 18;
                for (let i = 0; i < numCheckboxes; i++) {
                    const checkboxCell = document.createElement('td');
                    checkboxCell.className = 'checkbox-cell';
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.id = `checkbox-${index}-${i}`;
                    checkbox.name = `checkbox-${index}-${i}`;
                    
                    // إضافة مربع الاختيار إلى الخلية
                    checkboxCell.appendChild(checkbox);
                    row.appendChild(checkboxCell);
                }

                // عمود التوقيع
                const signatureCell = document.createElement('td');
                signatureCell.textContent = ''; // فارغ للتوقيع
                row.appendChild(signatureCell);
                
                tbody.appendChild(row);
            });
        }

        // تشغيل الدالة عند تحميل الصفحة
        window.onload = function() {
            const teachers = parseTeacherData(rawData);
            renderTable(teachers);
        };
    </script>
</body>
</html>

